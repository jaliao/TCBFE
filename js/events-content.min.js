var eventlink,CLIENT_ID="210078864362-qae06rotg828aeem1s1oprum0arv1ah3.apps.googleusercontent.com",API_KEY="AIzaSyC97R3obR1wbJRAxPafXZ954ukVHNPvDLQ",DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],SCOPES="https://www.googleapis.com/auth/calendar.events",addEventBtn=document.getElementById("ADD_EVENT"),viewEventBtn=document.getElementById("VIEW_EVENT");function handleClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({apiKey:API_KEY,clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()),addEventBtn.onclick=handleAuthClick}),(function(e){appendPre(JSON.stringify(e,null,2))}))}function updateSigninStatus(e){e&&handleAddEvent()}function handleAuthClick(e){gapi.auth2.getAuthInstance().signIn()}function handleSignoutClick(e){gapi.auth2.getAuthInstance().signOut()}function appendPre(e){var t=document.getElementById("content"),n=document.createTextNode(e+"\n");t.appendChild(n)}var _eventTitle=document.getElementById("EVENT_TITLE").textContent,_eventInfo=document.getElementById("EVENT_INFO").textContent,_eventStartDate=document.getElementById("EVENT_START_TIME").getAttribute("data-time"),_eventEndDate=document.getElementById("EVENT_END_TIME").getAttribute("data-time"),_eventLocation=document.querySelector(".footer .address").textContent,event={summary:_eventTitle,location:"The Central Boulevard",description:_eventInfo=_eventInfo.trim(),start:{dateTime:_eventStartDate=moment(_eventStartDate)},end:{dateTime:_eventEndDate=moment(_eventEndDate)}},handleAtferEventAdded=function(){addEventBtn.style.display="none",viewEventBtn.style.display="block",viewEventBtn.href=eventlink},handleAddEvent=function(){gapi.client.calendar.events.insert({calendarId:"primary",resource:event}).execute((function(e){handleSignoutClick(),eventlink=e.htmlLink,console.log("eventlink=",eventlink),handleAtferEventAdded()}))};let eventAdded=!1;$((function(){!function(){handleClientLoad();let e=document.getElementById("EVENT_START_TIME"),t=document.getElementById("EVENT_END_TIME"),n=e.getAttribute("data-time"),a=t.getAttribute("data-time");e.textContent=dateFormalizing(n,"HH:mm ddd, DD/MM/YYYY"),t.textContent=dateFormalizing(a,"HH:mm ddd, DD/MM/YYYY")}()}));